<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>Progress Bar 실습</title>
  <!-- Bootstrap CSS -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    rel="stylesheet"
  >
  <style>
    body {
      padding: 40px;
    }
    .container {
      max-width: 500px;
      margin: auto;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1 class="mb-4">Progress Bar 실습</h1>

    <!-- Progress bar -->
    <div class="progress mb-3" style="height: 30px;">
      <div
        id="progressBar"
        class="progress-bar progress-bar-striped progress-bar-animated"
        role="progressbar"
        style="width: 0%;"
        aria-valuemin="0"
        aria-valuemax="100"
      >0%</div>
    </div>

    <!-- Start 버튼 -->
    <button id="startButton" class="btn btn-primary">Start</button>
  </div>

  <script>
    const startButton = document.getElementById('startButton');
    const progressBar = document.getElementById('progressBar');

    startButton.addEventListener('click', () => {
      startButton.disabled = true;     // 버튼 비활성화
      let progress = 0;
      updateProgress(0);

      // 1초마다 10%씩 증가시키는 인터벌
      const intervalId = setInterval(() => {
        if (progress < 100) {
          progress += 10;
          updateProgress(progress);
        }
      }, 1000);

      // 3~5초 사이 랜덤 종료 시간 설정
      const randomSec = Math.random() * 2 + 3; // 3 ~ 5 (sec)
      setTimeout(() => {
        // 종료 시점에 즉시 100%로 설정
        progress = 100;
        updateProgress(100);

        clearInterval(intervalId);      // 인터벌 정리
        startButton.disabled = false;   // 버튼 다시 활성화
      }, randomSec * 1000);
    });

    // progressBar 업데이트 함수
    function updateProgress(value) {
      progressBar.style.width = value + '%';
      progressBar.textContent = value + '%';
      progressBar.setAttribute('aria-valuenow', value);
    }
  </script>
</body>
</html>
